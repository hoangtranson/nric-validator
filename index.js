"use strict";function _instanceof(e,r){return null!=r&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?!!r[Symbol.hasInstance](e):e instanceof r}function _toArray(e){return _arrayWithHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,r):void 0}}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,r){if(!_instanceof(e,r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function _createClass(e,r,n){return r&&_defineProperties(e.prototype,r),n&&_defineProperties(e,n),e}var REGION_SOUTHEAST_ASIA="SOUTHEAST_ASIA",REGION_BRITISH_ISLES="BRITISH_ISLES",REGION_SOVIET_REPUBLIC="SOVIET_REPUBLIC",REGION_EAST_ASIA="EAST_ASIA",REGION_SOUTH_ASIA="SOUTH_ASIA",REGION_AFRICA="AFRICA",REGION_SOUTH_AMERICA="SOUTH_AMERICA",REGION_CENTRAL_AMERICA="CENTRAL_AMERICA",REGION_NORTH_AMERICA="NORTH_AMERICA",REGION_OCEANIA="OCEANIA",REGION_MIDDLE_EAST="MIDDLE_EAST",REGION_EUROPE="EUROPE",REGION_MIDDLE_AMERICA="MIDDLE_AMERICA",REGION_MISCELLANEOUS="MISCELLANEOUS",stateCodePairs={JHR:["01","21","22","24"],KDH:["02","25","26","27"],KTN:["03","28","29"],MLK:["04","30"],NSN:["05","31","59"],PHG:["06","32","33"],PNG:["07","34","35"],PRK:["08","36","37","38"],PLS:["09","40"],SGR:["10","41","42","43","44"],TRG:["11","45","46"],SBH:["12","47","48","49"],SWK:["13","50","51","52","53"],KUL:["14","54","55","56","57"],LBN:["15","58"],PJY:["16"],UNKNOWN_STATE:["82"]},countryCodePairs={60:{country:"BN",region:REGION_SOUTHEAST_ASIA},61:{country:"ID",region:REGION_SOUTHEAST_ASIA},62:{country:"KH",region:REGION_SOUTHEAST_ASIA},63:{country:"LA",region:REGION_SOUTHEAST_ASIA},64:{country:"MM",region:REGION_SOUTHEAST_ASIA},65:{country:"PH",region:REGION_SOUTHEAST_ASIA},66:{country:"SG",region:REGION_SOUTHEAST_ASIA},67:{country:"TH",region:REGION_SOUTHEAST_ASIA},68:{country:"VN",region:REGION_SOUTHEAST_ASIA},71:{country:"FOREIGN_UNKNOWN",region:null},72:{country:"FOREIGN_UNKNOWN",region:null},74:{country:"CN",region:REGION_EAST_ASIA},75:{country:"IN",region:REGION_SOUTH_ASIA},76:{country:"PK",region:REGION_SOUTH_ASIA},77:{country:"SA",region:REGION_MIDDLE_EAST},78:{country:"LK",region:REGION_SOUTH_ASIA},79:{country:"BD",region:REGION_SOUTH_ASIA},83:{country:"AS|AU|CX|CC|CK|FJ|PF|GU|HM|MH|FM|NC|NZ|NU|NF|PG|TL|TK|UM|WF",region:REGION_OCEANIA},84:{country:"AI|AR|AW|BO|BR|CL|CO|EC|GF|GP|GY|PY|PE|GS|ST|UY|VE",region:REGION_SOUTH_AMERICA},85:{country:"DZ|AO|BW|BI|CM|CF|CG|CD|DG|EG|ER|ET|GA|GM|GN|KE|LR|MW|ML|MR|YT|MA|MZ|NA|NE|NG|RW|RE|SN|SL|SO|SD|SZ|TZ|TG|TO|TN|UG|ME|ZR|ZM|ZW",region:REGION_AFRICA},86:{country:"AM|AT|BE|CY|DK|FO|FR|FI|DE|DD|GR|VA|IT|LU|MK|MT|MC|NL|NO|PT|MD|SK|SI|ES|SE|CH|GG|JE|IM",region:REGION_EUROPE},87:{country:"GB|IE",region:REGION_BRITISH_ISLES},88:{country:"BH|IR|IQ|PS|JO|KW|OM|QA|YE|SY|TR|YE|YD|",region:REGION_MIDDLE_EAST},89:{country:"JP|KP|KR|TW",region:REGION_EAST_ASIA},90:{country:"BS|BB|BZ|CR|CU|DM|DO|SV|GD|GT|HT|HN|JM|MQ|MX|NI|PA|PR|KN|LC|VC|TT|TC|VI",region:REGION_MIDDLE_AMERICA},91:{country:"CA|GL|AN|PM|US",region:REGION_NORTH_AMERICA},92:{country:"AL|BY|BA|BG|HR|CZ|CS|EE|GE|HU|LV|LT|ME|PL|XK|RO|RU|RS|UA",region:REGION_SOVIET_REPUBLIC},93:{country:"AF|AD|AQ|AG|AZ|BJ|BM|BT|IO|BF|CV|KY|KM|DY|GQ|TF|GI|GW|HK|IS|CI|KZ|KI|KG|LS|LY|LI|MO|MG|MV|MU|MN|MS|NR|NP|MP|PW|PS|PN|SH|LC|VC|WS|SM|ST|SC|SB|SJ|TJ|TM|TV|HV|UZ|VU|VA|VG|YU",region:REGION_MISCELLANEOUS},98:{country:"STATELESS",region:null},99:{country:"UNSPECIFIED",region:null}},splitNRIC=function(e){var r=e.match(/^(\d{2})(\d{2})(\d{2})-?(\d{2})-?(\d{3})(\d{1})$/);if(!r)throw new Error("Invalid value number format");return r},combineToDate=function(e,r,n){var t=new Date,o=new Date(e,r-1,n),i=t.getFullYear()-o.getFullYear();return(i>100||100==i&&dateIsBefore(o,t))&&o.setFullYear(o.getFullYear()+100),o},dateIsBefore=function(e,r){return new Date(0,e.getMonth(),e.getDate())<new Date(0,r.getMonth(),r.getDate())},getGender=function(e){return e%2==0?"F":"M"},inBetween=function(e,r,n){return e>=r&&e<=n},isStateValid=function(e){return isMalaysia(e)||isForeign(e)};function numisBetween(e,r,n){return(e-r)*(e-n)<=0}function codeToState(e){return Object.keys(stateCodePairs).find((function(r){return stateCodePairs[r].includes(e)}))}function isMalaysia(e){return numisBetween(e,1,16)||numisBetween(e,21,59)||82==e}function isForeign(e){return null!=countryCodePairs[e]}function parseMalaysia(e){return{region:REGION_SOUTHEAST_ASIA,country:"MY",state:codeToState(e)}}function parseForeign(e){return Object.assign({state:null},countryCodePairs[e])}function getBirthPlace(e){return isMalaysia(e)?parseMalaysia(e):isForeign(e)?parseForeign(e):null}var NRIC=function(){function e(r){_classCallCheck(this,e),this.id=r}return _createClass(e,[{key:"isValid",get:function(){var e=_toArray(splitNRIC(this.id)),r=(e[0],e[1]),n=e[2],t=e[3],o=e[4],i=(e.slice(5),combineToDate(r,n,t));return!(!inBetween(n,1,12)||!inBetween(t,1,31))&&(i&&isStateValid(o))}},{key:"birthDate",get:function(){var e=_toArray(splitNRIC(this.id)),r=(e[0],e[1]),n=e[2],t=e[3];e[4],e.slice(5);return"".concat(combineToDate(r,n,t))}},{key:"gender",get:function(){var e=_toArray(splitNRIC(this.id)),r=(e[0],e[1],e[2],e[3],e[4],e.slice(5));return getGender(r[1])}},{key:"age",get:function(){var e=_toArray(splitNRIC(this.id)),r=(e[0],e[1]),n=e[2],t=e[3],o=(e[4],e.slice(5),new Date),i=new Date(r,n-1,t),a=o.getFullYear()-i.getFullYear();return a>=100?a-100:a}}]),e}();module.exports=NRIC;
